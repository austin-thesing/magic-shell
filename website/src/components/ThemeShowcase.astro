---
const themes = [
  { id: "opencode", name: "OpenCode", primary: "#fab283", bg: "#0a0a0a" },
  { id: "tokyonight", name: "Tokyo Night", primary: "#82aaff", bg: "#1a1b26" },
  { id: "catppuccin", name: "Catppuccin", primary: "#89b4fa", bg: "#1e1e2e" },
  { id: "gruvbox", name: "Gruvbox", primary: "#83a598", bg: "#282828" },
  { id: "nord", name: "Nord", primary: "#88C0D0", bg: "#2E3440" },
  { id: "dracula", name: "Dracula", primary: "#bd93f9", bg: "#282a36" },
  { id: "one-dark", name: "One Dark", primary: "#61afef", bg: "#282c34" },
  { id: "matrix", name: "Matrix", primary: "#00ff00", bg: "#000000" },
];
---

<div class="theme-showcase">
  <div class="theme-grid">
    {themes.map((theme) => (
      <button 
        class="theme-card" 
        data-theme={theme.id}
        style={`--theme-primary: ${theme.primary}; --theme-bg: ${theme.bg};`}
      >
        <div class="theme-preview">
          <div class="preview-header">
            <span class="preview-dots">
              <span></span><span></span><span></span>
            </span>
          </div>
          <div class="preview-body">
            <span class="preview-prompt">$</span>
            <span class="preview-text">msh</span>
            <span class="preview-cursor"></span>
          </div>
        </div>
        <span class="theme-name">{theme.name}</span>
      </button>
    ))}
  </div>

  <div class="theme-demo">
    <div class="demo-window">
      <div class="demo-header">
        <div class="demo-lights">
          <span></span><span></span><span></span>
        </div>
        <span class="demo-title">magic-shell</span>
      </div>
      <div class="demo-body">
        <div class="demo-line">
          <span class="demo-prompt">$</span>
          <span class="demo-input">msh "find large files"</span>
        </div>
        <div class="demo-line output">
          <span class="demo-result">find . -type f -size +100M</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const cards = document.querySelectorAll<HTMLButtonElement>('.theme-card');
  const demo = document.querySelector<HTMLElement>('.theme-demo');

  cards.forEach(card => {
    card.addEventListener('click', () => {
      const primary = card.style.getPropertyValue('--theme-primary');
      const bg = card.style.getPropertyValue('--theme-bg');
      
      cards.forEach(c => c.classList.remove('active'));
      card.classList.add('active');
      
      if (demo) {
        demo.style.setProperty('--active-primary', primary);
        demo.style.setProperty('--active-bg', bg);
      }
    });
  });

  // Set first theme as active
  cards[0]?.classList.add('active');
</script>

<style>
  .theme-showcase {
    --active-primary: #fab283;
    --active-bg: #0a0a0a;
  }

  .theme-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-3);
    margin-bottom: var(--space-6);
  }

  @media (max-width: 768px) {
    .theme-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .theme-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: var(--space-3);
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: center;
  }

  .theme-card:hover {
    border-color: var(--border-active);
    transform: translateY(-2px);
  }

  .theme-card.active {
    border-color: var(--theme-primary);
    box-shadow: 0 0 20px color-mix(in srgb, var(--theme-primary) 20%, transparent);
  }

  .theme-preview {
    background: var(--theme-bg);
    border-radius: var(--radius-sm);
    overflow: hidden;
    margin-bottom: var(--space-2);
  }

  .preview-header {
    padding: var(--space-1) var(--space-2);
    background: color-mix(in srgb, var(--theme-bg) 80%, white 5%);
  }

  .preview-dots {
    display: flex;
    gap: 4px;
  }

  .preview-dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: color-mix(in srgb, var(--theme-primary) 30%, var(--theme-bg));
  }

  .preview-body {
    padding: var(--space-2) var(--space-3);
    font-family: var(--font-mono);
    font-size: 10px;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .preview-prompt {
    color: var(--theme-primary);
  }

  .preview-text {
    color: color-mix(in srgb, var(--theme-bg) 20%, white);
  }

  .preview-cursor {
    width: 6px;
    height: 12px;
    background: var(--theme-primary);
    animation: blink 1s step-end infinite;
  }

  .theme-name {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--text-secondary);
  }

  .theme-card.active .theme-name {
    color: var(--theme-primary);
  }

  /* Demo window */
  .theme-demo {
    --active-primary: #fab283;
    --active-bg: #0a0a0a;
    transition: all var(--transition-base);
  }

  .demo-window {
    background: var(--active-bg);
    border: 1px solid color-mix(in srgb, var(--active-primary) 20%, transparent);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: 0 0 40px color-mix(in srgb, var(--active-primary) 10%, transparent);
    transition: all var(--transition-base);
  }

  .demo-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: color-mix(in srgb, var(--active-bg) 80%, white 5%);
    border-bottom: 1px solid color-mix(in srgb, var(--active-primary) 10%, transparent);
  }

  .demo-lights {
    display: flex;
    gap: 6px;
  }

  .demo-lights span {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .demo-lights span:nth-child(1) { background: #ff5f56; }
  .demo-lights span:nth-child(2) { background: #ffbd2e; }
  .demo-lights span:nth-child(3) { background: #27ca3f; }

  .demo-title {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: color-mix(in srgb, var(--active-bg) 30%, white);
  }

  .demo-body {
    padding: var(--space-5);
    font-family: var(--font-mono);
    font-size: var(--text-sm);
  }

  .demo-line {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
  }

  .demo-line.output {
    margin-top: var(--space-3);
    margin-bottom: 0;
  }

  .demo-prompt {
    color: var(--active-primary);
    font-weight: 600;
  }

  .demo-input {
    color: color-mix(in srgb, var(--active-bg) 10%, white);
  }

  .demo-result {
    color: var(--active-primary);
    opacity: 0.9;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
</style>
